<div class="product-card">
  <a href="/products/{{ product.slug }}">
    <div class="product-image">
      {% if product.images.size > 0 %}
        <img
          src="{{ product.images[0] }}"
          alt="{{ product.title }}"
          loading="lazy">
        {% if product.variants[0].compare_at and product.variants[0].compare_at > product.variants[0].price %}
          <span class="product-badge sale-badge">تخفيض</span>
        {% endif %}
      {% else %}
        <div class="no-image">
          <svg
            class="no-image-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor">
            <rect
              x="3"
              y="3"
              width="18"
              height="18"
              rx="2"
              ry="2"></rect>
            <circle
              cx="8.5"
              cy="8.5"
              r="1.5"></circle>
            <polyline points="21,15 16,10 5,21"></polyline>
          </svg>
          <span>لا توجد صورة</span>
        </div>
      {% endif %}
    </div>
  </a>

  <div class="product-info">
    {% if product.category %}
      <span class="product-category">{{ product.category }}</span>
    {% endif %}
    <h3 class="product-title">
      <a href="/products/{{ product.slug }}">{{ product.title }}</a>
    </h3>
    {% if product.description %}
      <p class="product-description">{{ product.description | truncate: 80 }}</p>
    {% endif %}

    <div class="product-price">
      <span class="current-price">DZD {{ product.variants[0].price }}</span>
      {% if product.variants[0].compare_at and product.variants[0].compare_at > product.variants[0].price %}
        <span class="compare-price">DZD {{ product.variants[0].compare_at }}</span>
        {% assign discount = product.variants[0].compare_at | minus: product.variants[0].price | times: 100 | divided_by: product.variants[0].compare_at %}
        <span class="discount-percent">-{{ discount }}%</span>
      {% endif %}
    </div>

    <button type="button" class="product-btn">أضف إلى السلة</button>
  </div>
</div>